library IEEE;
use IEEE.STD_LOGIC_1164.ALL;
use IEEE.NUMERIC_STD.ALL;

entity waveLUT is
    Port (
        clk      : in  STD_LOGIC;
       -- wave_out : out INTEGER := 0;
		wave_out_hex: out std_logic_vector(7 downto 0)
    );
end waveLUT;

architecture Behavioral of waveLUT is

  -- type wave_array is array (0 to 31) of INTEGER;
  --  constant wave : wave_array := (128,153, 178, 200, 220, 236, 247, 254, 255, 251, 242, 228, 211, 189, 166, 140, 115, 89, 66, 44, 27, 13, 4, 0, 1, 8, 19, 35, 55, 77, 102, 127);


   type wavehex_array is array (0 to 31) of std_logic_vector(7 downto 0);
   constant wavehex : wavehex_array := ("10000000", "10011001", "10110010", "11001000", "11011100", "11101100", "11110111", "11111110", "11111111", "11111011", "11110010", "11100100", "11010011", "10111101", "10100110", "10001100", "01110011", "01011001", "01000010", "00101100", "00011011", "00001101", "00000100", "00000000", "00000001", "00001000", "00010011", "00100011", "00110111", "01001101", "01100110", "01111111");


    type state_type is (UPDATE_VALUE, HOLD);
    signal current_state : state_type := UPDATE_VALUE;

begin

    process(clk)
        variable i     : INTEGER range 0 to 31 := 0;
        variable count : INTEGER range 0 to 2 := 0;
	
    begin
        if rising_edge(clk) then

            case current_state is

                when UPDATE_VALUE =>
                    wave_out <= wave(i);

                    if i = 31 then
                        i := 0;
                    else
                        i := i + 1;
                    end if;

                    count := 0;
                    current_state <= HOLD;

                when HOLD =>
                    if count = 2 then
                        current_state <= UPDATE_VALUE;
                    else
                        count := count + 1;
                        current_state <= HOLD;
                    end if;

            end case;

        end if;
    end process;

end Behavioral;
